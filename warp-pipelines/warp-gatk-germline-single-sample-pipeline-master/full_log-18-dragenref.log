Docker version 28.4.0, build d8eb465
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
darja
uid=1027(darja) gid=1028(darja) groups=1028(darja),27(sudo),988(docker),1039(lasr)
/mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/
Running with Cromwell 91 , Dockstore tests with 84
Created temporary working directory at '/mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168'
Successfully downloaded files for entry 'github.com/broadinstitute/warp/WholeGenomeGermlineSingleSample'
Creating directories for run of Dockstore launcher in current working directory: /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168
Provisioning your input files to your local machine
Downloading: WholeGenomeGermlineSingleSample.wgs_coverage_interval_list from /mnt/nas1/projects/lasr/blendseq/warp-pipelines/data/warp-gatk-dragen-input-files-01/intervals/wgs_coverage_regions.hg38.interval_list to: /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/cromwell-input/60cdcfdd-a9c4-4a8f-b0e0-6eb2565a9231/mnt/nas1/projects/lasr/blendseq/warp-pipelines/data/warp-gatk-dragen-input-files-01/intervals/wgs_coverage_regions.hg38.interval_list
Checksums validated.
Calling out to Cromwell to run your workflow
Executing: java -Duser_id=1027 -Dgroup_id=1028 -Dconfig.file=/mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/cromwell.conf -jar /home/darja/.dockstore/libraries/cromwell-91.jar run --inputs /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/foo10097447534605618618json /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/pipelines/wdl/dna_seq/germline/single_sample/wgs/WholeGenomeGermlineSingleSample.wdl
[2025-11-14 11:27:41,32] [info] Running with database db.url = jdbc:hsqldb:mem:4810d456-ceb9-4ef9-94ac-40bf774f5aed;shutdown=false;hsqldb.tx=mvcc
[2025-11-14 11:27:43,97] [info] Running migration RenameWorkflowOptionsInMetadata with a read batch size of 100000 and a write batch size of 100000
[2025-11-14 11:27:43,99] [info] [RenameWorkflowOptionsInMetadata] 100%
[2025-11-14 11:27:44,28] [info] Running with database db.url = jdbc:hsqldb:mem:53c455ae-699f-465b-a39b-ddbe16d51c76;shutdown=false;hsqldb.tx=mvcc
[2025-11-14 11:27:44,80] [info] Slf4jLogger started
[2025-11-14 11:27:44,97] [info] Workflow heartbeat configuration:
{
  "cromwellId" : "cromid-5e6fd45",
  "heartbeatInterval" : "2 minutes",
  "ttl" : "10 minutes",
  "failureShutdownDuration" : "5 minutes",
  "writeBatchSize" : 10000,
  "writeThreshold" : 10000
}
[2025-11-14 11:27:45,04] [info] Metadata summary refreshing every 1 second.
[2025-11-14 11:27:45,05] [info] No metadata archiver defined in config
[2025-11-14 11:27:45,05] [info] No metadata deleter defined in config
[2025-11-14 11:27:45,06] [info] KvWriteActor configured to flush with batch size 200 and process rate 5 seconds.
[2025-11-14 11:27:45,06] [info] CallCacheWriteActor configured to flush with batch size 100 and process rate 3 seconds.
[2025-11-14 11:27:45,06] [info] WriteMetadataActor configured to flush with batch size 200 and process rate 5 seconds.
[2025-11-14 11:27:45,15] [info] JobRestartCheckTokenDispenser - Distribution rate: 50 per 1 seconds.
[2025-11-14 11:27:45,16] [info] JobExecutionTokenDispenser - Distribution rate: 20 per 10 seconds.
[2025-11-14 11:27:45,16] [info] GroupMetricsActor configured to log groups experiencing quota exhaustion at interval of 5 minutes.
[2025-11-14 11:27:45,22] [info] SingleWorkflowRunnerActor: Version 91
[2025-11-14 11:27:45,23] [info] SingleWorkflowRunnerActor: Submitting workflow
[2025-11-14 11:27:45,27] [info] 1 new workflows fetched by cromid-5e6fd45: b99b9be0-aafd-4375-a895-d53cc3695de8
[2025-11-14 11:27:45,29] [info] WorkflowManagerActor: Starting workflow [38;5;2mb99b9be0-aafd-4375-a895-d53cc3695de8[0m
[2025-11-14 11:27:45,29] [info] Unspecified type (Unspecified version) workflow b99b9be0-aafd-4375-a895-d53cc3695de8 submitted
[2025-11-14 11:27:45,30] [info] WorkflowManagerActor: Successfully started WorkflowActor-b99b9be0-aafd-4375-a895-d53cc3695de8
[2025-11-14 11:27:45,30] [info] Retrieved 1 workflows from the WorkflowStoreActor
[2025-11-14 11:27:45,31] [info] SingleWorkflowRunnerActor: Workflow submitted [38;5;2mb99b9be0-aafd-4375-a895-d53cc3695de8[0m
[2025-11-14 11:27:45,33] [info] WorkflowStoreHeartbeatWriteActor configured to flush with batch size 10000 and process rate 2 minutes.
[2025-11-14 11:27:45,47] [info] MaterializeWorkflowDescriptorActor [[38;5;2mb99b9be0[0m]: Parsing workflow as WDL 1.0
[2025-11-14 11:27:47,43] [info] MaterializeWorkflowDescriptorActor [[38;5;2mb99b9be0[0m]: Call-to-Backend assignments: BamToCram.CheckPreValidation -> LocalWithDocker, UnmappedBamToAlignedBam.BaseRecalibrator -> LocalWithDocker, SplitLargeReadGroup.SamToFastqAndBwaMemAndMba -> LocalWithDocker, VariantCalling.HaplotypeCallerGATK4 -> LocalWithDocker, UnmappedBamToAlignedBam.CheckContamination -> LocalWithDocker, SplitLargeReadGroup.GatherMonolithicBamFile -> LocalWithDocker, UnmappedBamToAlignedBam.SortSampleBam -> LocalWithDocker, VariantCalling.ErrorMessageIncorrectInput -> LocalWithDocker, UnmappedBamToAlignedBam.GatherBamFiles -> LocalWithDocker, AggregatedBamQC.CheckFingerprintTask -> LocalWithDocker, VariantCalling.DragstrAutoCalibration -> LocalWithDocker, UnmappedBamToAlignedBam.CollectQualityYieldMetrics -> LocalWithDocker, VariantCalling.ScatterIntervalList -> LocalWithDocker, VariantCalling.MergeVCFs -> LocalWithDocker, UnmappedBamToAlignedBam.CrossCheckFingerprints -> LocalWithDocker, UnmappedBamToAlignedBam.GatherBqsrReports -> LocalWithDocker, WholeGenomeGermlineSingleSample.PresetArgumentsError -> LocalWithDocker, UnmappedBamToAlignedBam.SamToFastqAndDragmapAndMba -> LocalWithDocker, VariantCalling.ValidateVCF -> LocalWithDocker, VariantCalling.CollectVariantCallingMetrics -> LocalWithDocker, WholeGenomeGermlineSingleSample.CollectRawWgsMetrics -> LocalWithDocker, BamToCram.ConvertToCram -> LocalWithDocker, UnmappedBamToAlignedBam.CreateSequenceGroupingTSV -> LocalWithDocker, UnmappedBamToAlignedBam.ApplyBQSR -> LocalWithDocker, AggregatedBamQC.CalculateReadGroupChecksum -> LocalWithDocker, WholeGenomeGermlineSingleSample.DragenModeVariantCallingAndGATK3Error -> LocalWithDocker, VariantCalling.SortBamout -> LocalWithDocker, SplitLargeReadGroup.SamToFastqAndDragmapAndMba -> LocalWithDocker, WholeGenomeGermlineSingleSample.CollectWgsMetrics -> LocalWithDocker, VariantCalling.MergeBamouts -> LocalWithDocker, VariantCalling.DragenHardFilterVcf -> LocalWithDocker, VariantCalling.Reblock -> LocalWithDocker, VariantCalling.HaplotypeCallerGATK3 -> LocalWithDocker, BamToCram.ValidateCram -> LocalWithDocker, SplitLargeReadGroup.SamSplitter -> LocalWithDocker, UnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics -> LocalWithDocker, UnmappedBamToAlignedBam.MarkDuplicates -> LocalWithDocker, AggregatedBamQC.CollectReadgroupBamQualityMetrics -> LocalWithDocker, AggregatedBamQC.CollectAggregationMetrics -> LocalWithDocker, UnmappedBamToAlignedBam.SamToFastqAndBwaMemAndMba -> LocalWithDocker
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [disks, memory, preemptible] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [disks, memory, preemptible] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,59] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, bootDiskSizeGb, disks, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [memory, disks, preemptible] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, memory, disks] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [memory, disks, preemptible] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [memory, disks, preemptible] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:47,60] [[38;5;220mwarn[0m] LocalWithDocker [[38;5;2mb99b9be0[0m]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
[2025-11-14 11:27:50,14] [info] Not triggering log of restart checking token queue status. Effective log interval = None
[2025-11-14 11:27:50,17] [info] Not triggering log of execution token queue status. Effective log interval = None
[2025-11-14 11:27:50,87] [info] b99b9be0-aafd-4375-a895-d53cc3695de8-SubWorkflowExecutionActor-SubWorkflow-UnmappedBamToAlignedBam:-1:1 [[38;5;2mb99b9be0[0mSubWorkflow-UnmappedBamToAlignedBam:-1:1]: Running subworkflow: 6a80d6bc-c51f-4c29-a206-f821379275e2, root: b99b9be0-aafd-4375-a895-d53cc3695de8
[2025-11-14 11:27:52,93] [info] 6a80d6bc-c51f-4c29-a206-f821379275e2-SubWorkflowActor-SubWorkflow-UnmappedBamToAlignedBam:-1:1 [[38;5;2m6a80d6bc[0m]: Starting UnmappedBamToAlignedBam.CreateSequenceGroupingTSV
[2025-11-14 11:27:55,19] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 11:27:56,11] [info] 6a80d6bc-c51f-4c29-a206-f821379275e2-SubWorkflowActor-SubWorkflow-UnmappedBamToAlignedBam:-1:1 [[38;5;2m6a80d6bc[0m]: Starting UnmappedBamToAlignedBam.CollectQualityYieldMetrics
[2025-11-14 11:27:56,60] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CreateSequenceGroupingTSV:NA:1]: Unrecognized runtime attribute keys: preemptible, memory
[2025-11-14 11:27:56,72] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CreateSequenceGroupingTSV:NA:1]: [38;5;5mpython3 <<CODE
with open("/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/inputs/-1569105944/Homo_sapiens_assembly38_masked.dict", "r") as ref_dict_file:
    sequence_tuple_list = []
    longest_sequence = 0
    for line in ref_dict_file:
        if line.startswith("@SQ"):
            line_split = line.split("\t")
            # (Sequence_Name, Sequence_Length)
            sequence_tuple_list.append((line_split[1].split("SN:")[1], int(line_split[2].split("LN:")[1])))
    longest_sequence = sorted(sequence_tuple_list, key=lambda x: x[1], reverse=True)[0][1]
# We are adding this to the intervals because hg38 has contigs named with embedded colons and a bug in GATK strips off
# the last element after a :, so we add this as a sacrificial element.
hg38_protection_tag = ":1+"
# initialize the tsv string with the first sequence
tsv_string = sequence_tuple_list[0][0] + hg38_protection_tag
temp_size = sequence_tuple_list[0][1]
for sequence_tuple in sequence_tuple_list[1:]:
    if temp_size + sequence_tuple[1] <= longest_sequence:
        temp_size += sequence_tuple[1]
        tsv_string += "\t" + sequence_tuple[0] + hg38_protection_tag
    else:
        tsv_string += "\n" + sequence_tuple[0] + hg38_protection_tag
        temp_size = sequence_tuple[1]
# add the unmapped sequences as a separate line to ensure that they are recalibrated as well
with open("sequence_grouping.txt","w") as tsv_file:
  tsv_file.write(tsv_string)
  tsv_file.close()

tsv_string += '\n' + "unmapped"

with open("sequence_grouping_with_unmapped.txt","w") as tsv_file_with_unmapped:
  tsv_file_with_unmapped.write(tsv_string)
  tsv_file_with_unmapped.close()
CODE[0m
[2025-11-14 11:27:56,83] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CreateSequenceGroupingTSV:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV \
  us.gcr.io/broad-dsp-gcr-public/base/python@sha256:7e31f0581fc30814ceb6269f52f0094f5f314b3faefb9941d8c0b1bd22e4af53 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CreateSequenceGroupingTSV/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 11:27:58,15] [info] 6a80d6bc-c51f-4c29-a206-f821379275e2-SubWorkflowExecutionActor-SubWorkflow-SplitRG:0:1 [[38;5;2m6a80d6bc[0mSubWorkflow-SplitRG:0:1]: Running subworkflow: 68503023-4139-40aa-a490-2cae765ab1c1, root: b99b9be0-aafd-4375-a895-d53cc3695de8
[2025-11-14 11:28:00,10] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CreateSequenceGroupingTSV:NA:1]: job id: 591668
[2025-11-14 11:28:00,11] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CreateSequenceGroupingTSV:NA:1]: Status change from - to Done
[2025-11-14 11:28:00,19] [info] 68503023-4139-40aa-a490-2cae765ab1c1-SubWorkflowActor-SubWorkflow-SplitRG:0:1 [[38;5;2m68503023[0m]: Starting SplitLargeReadGroup.SamSplitter
[2025-11-14 11:28:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 11:28:05,98] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: Unrecognized runtime attribute keys: preemptible, disks, memory
[2025-11-14 11:36:13,37] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: [38;5;5mjava -Xms2000m -Xmx3000m -jar /usr/picard/picard.jar \
  CollectQualityYieldMetrics \
  INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/inputs/1329413647/ERR3684866_ILMN.unmapped.bam \
  OQ=true \
  OUTPUT=ERR3684866_ILMN.unmapped.quality_yield_metrics[0m
[2025-11-14 11:36:13,38] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0 \
  us.gcr.io/broad-gotc-prod/picard-cloud@sha256:e5ad5339080c3107c04e4a4d000b8ab06f472b77019debc3ff75499d28995b0c /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectQualityYieldMetrics/shard-0/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 11:36:15,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: job id: 592119
[2025-11-14 11:36:15,09] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: Status change from - to WaitingForReturnCode
[2025-11-14 12:22:08,47] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectQualityYieldMetrics:0:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 12:22:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 12:22:16,01] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: Unrecognized runtime attribute keys: preemptible, disks, memory
[2025-11-14 12:22:16,05] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: [38;5;5mset -e
mkdir output_dir

total_reads=$(samtools view -c /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/inputs/1329413647/ERR3684866_ILMN.unmapped.bam)

java -Dsamjdk.compression_level=2 -Xms3000m -Xmx3600m -jar /usr/gitc/picard.jar SplitSamByNumberOfReads \
  INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/inputs/1329413647/ERR3684866_ILMN.unmapped.bam \
  OUTPUT=output_dir \
  SPLIT_TO_N_READS=48000000 \
  TOTAL_READS_IN_INPUT=$total_reads[0m
[2025-11-14 12:22:16,06] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter \
  us.gcr.io/broad-gotc-prod/samtools-picard-bwa@sha256:68eae459869592a095b75598039a65e02dede4f6e89cb1452a6a9e673cc10fa9 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamSplitter/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 12:22:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: job id: 592958
[2025-11-14 12:22:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: Status change from - to WaitingForReturnCode
[2025-11-14 13:46:18,75] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamSplitter:NA:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 13:46:24,22] [info] 68503023-4139-40aa-a490-2cae765ab1c1-SubWorkflowActor-SubWorkflow-SplitRG:0:1 [[38;5;2m68503023[0m]: Starting SplitLargeReadGroup.SamToFastqAndDragmapAndMba (33 shards)
[2025-11-14 13:46:25,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 13:46:26,16] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 13:47:34,42] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/451667175/shard_0028.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0028.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/451667175/shard_0028.bam \
  OUTPUT=shard_0028.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/inputs/451667175/shard_0028.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 13:47:34,43] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-27/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 13:47:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: job id: 593933
[2025-11-14 13:47:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: Status change from - to WaitingForReturnCode
[2025-11-14 14:19:28,23] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:27:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 14:19:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 14:19:35,23] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 14:19:54,27] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/451667175/shard_0018.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0018.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/451667175/shard_0018.bam \
  OUTPUT=shard_0018.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/inputs/451667175/shard_0018.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 14:19:54,27] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-17/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 14:19:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: job id: 594877
[2025-11-14 14:19:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: Status change from - to WaitingForReturnCode
[2025-11-14 14:52:42,33] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:17:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 14:52:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 14:52:45,23] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 14:53:03,58] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/451667175/shard_0005.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0005.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/451667175/shard_0005.bam \
  OUTPUT=shard_0005.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/inputs/451667175/shard_0005.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 14:53:03,59] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-4/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 14:53:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: job id: 595762
[2025-11-14 14:53:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: Status change from - to WaitingForReturnCode
[2025-11-14 15:25:49,70] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:4:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 15:25:55,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 15:25:55,23] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 15:26:13,56] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/451667175/shard_0020.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0020.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/451667175/shard_0020.bam \
  OUTPUT=shard_0020.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/inputs/451667175/shard_0020.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 15:26:13,56] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-19/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 15:26:15,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: job id: 596989
[2025-11-14 15:26:15,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: Status change from - to WaitingForReturnCode
[2025-11-14 16:03:10,92] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:19:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 16:03:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 16:03:15,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 16:03:32,32] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/451667175/shard_0014.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0014.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/451667175/shard_0014.bam \
  OUTPUT=shard_0014.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/inputs/451667175/shard_0014.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 16:03:32,33] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-13/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 16:03:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: job id: 598167
[2025-11-14 16:03:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: Status change from - to WaitingForReturnCode
[2025-11-14 16:35:30,19] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:13:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 16:35:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 16:35:35,23] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 16:35:56,05] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/451667175/shard_0016.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0016.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/451667175/shard_0016.bam \
  OUTPUT=shard_0016.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/inputs/451667175/shard_0016.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 16:35:56,06] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-15/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 16:36:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: job id: 599021
[2025-11-14 16:36:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: Status change from - to WaitingForReturnCode
[2025-11-14 17:12:04,44] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:15:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 17:12:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 17:12:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 17:12:23,44] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/451667175/shard_0001.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0001.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/451667175/shard_0001.bam \
  OUTPUT=shard_0001.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/inputs/451667175/shard_0001.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 17:12:23,45] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-0/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 17:12:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: job id: 599899
[2025-11-14 17:12:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: Status change from - to WaitingForReturnCode
[2025-11-14 17:44:30,54] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:0:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 17:44:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 17:44:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 17:46:19,56] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/451667175/shard_0023.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0023.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/451667175/shard_0023.bam \
  OUTPUT=shard_0023.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/inputs/451667175/shard_0023.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 17:46:19,57] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-22/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 17:46:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: job id: 600782
[2025-11-14 17:46:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: Status change from - to WaitingForReturnCode
[2025-11-14 18:25:58,89] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:22:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 18:26:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 18:26:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 18:26:24,57] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/451667175/shard_0015.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0015.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/451667175/shard_0015.bam \
  OUTPUT=shard_0015.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/inputs/451667175/shard_0015.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 18:26:24,57] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-14/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 18:26:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: job id: 601703
[2025-11-14 18:26:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: Status change from - to WaitingForReturnCode
[2025-11-14 19:02:36,82] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:14:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 19:02:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 19:02:45,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 19:03:06,40] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/451667175/shard_0031.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0031.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/451667175/shard_0031.bam \
  OUTPUT=shard_0031.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/inputs/451667175/shard_0031.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 19:03:06,41] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-30/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 19:03:10,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: job id: 602570
[2025-11-14 19:03:10,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: Status change from - to WaitingForReturnCode
[2025-11-14 19:42:35,92] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:30:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 19:42:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 19:42:45,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 19:42:57,92] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/451667175/shard_0021.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0021.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/451667175/shard_0021.bam \
  OUTPUT=shard_0021.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/inputs/451667175/shard_0021.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 19:42:57,92] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-20/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 19:43:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: job id: 603455
[2025-11-14 19:43:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: Status change from - to WaitingForReturnCode
[2025-11-14 20:21:29,40] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:20:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 20:21:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 20:21:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 20:21:56,19] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/451667175/shard_0019.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0019.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/451667175/shard_0019.bam \
  OUTPUT=shard_0019.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/inputs/451667175/shard_0019.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 20:21:56,20] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-18/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 20:22:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: job id: 604380
[2025-11-14 20:22:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: Status change from - to WaitingForReturnCode
[2025-11-14 20:54:21,66] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:18:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 20:54:25,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 20:54:25,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 20:54:43,69] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/451667175/shard_0003.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0003.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/451667175/shard_0003.bam \
  OUTPUT=shard_0003.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/inputs/451667175/shard_0003.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 20:54:43,69] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-2/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 20:54:45,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: job id: 605335
[2025-11-14 20:54:45,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: Status change from - to WaitingForReturnCode
[2025-11-14 21:27:43,48] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:2:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 21:27:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 21:27:45,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 21:28:05,00] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/451667175/shard_0002.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0002.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/451667175/shard_0002.bam \
  OUTPUT=shard_0002.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/inputs/451667175/shard_0002.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 21:28:05,01] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-1/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 21:28:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: job id: 606207
[2025-11-14 21:28:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: Status change from - to WaitingForReturnCode
[2025-11-14 21:59:02,56] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:1:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 21:59:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 21:59:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 21:59:24,84] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/451667175/shard_0026.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0026.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/451667175/shard_0026.bam \
  OUTPUT=shard_0026.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/inputs/451667175/shard_0026.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 21:59:24,85] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-25/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 21:59:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: job id: 607081
[2025-11-14 21:59:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: Status change from - to WaitingForReturnCode
[2025-11-14 22:33:40,07] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:25:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 22:33:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 22:33:45,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 22:34:04,37] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/451667175/shard_0009.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0009.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/451667175/shard_0009.bam \
  OUTPUT=shard_0009.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/inputs/451667175/shard_0009.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 22:34:04,37] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-8/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 22:34:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: job id: 607928
[2025-11-14 22:34:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: Status change from - to WaitingForReturnCode
[2025-11-14 23:09:28,52] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:8:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 23:09:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 23:09:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 23:09:54,51] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/451667175/shard_0011.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0011.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/451667175/shard_0011.bam \
  OUTPUT=shard_0011.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/inputs/451667175/shard_0011.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 23:09:54,51] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-10/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 23:09:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: job id: 608842
[2025-11-14 23:09:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: Status change from - to WaitingForReturnCode
[2025-11-14 23:41:29,72] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:10:1]: Status change from WaitingForReturnCode to Done
[2025-11-14 23:41:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-14 23:41:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-14 23:41:54,78] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/451667175/shard_0007.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0007.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/451667175/shard_0007.bam \
  OUTPUT=shard_0007.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/inputs/451667175/shard_0007.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-14 23:41:54,78] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-6/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-14 23:41:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: job id: 609687
[2025-11-14 23:41:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: Status change from - to WaitingForReturnCode
[2025-11-15 00:15:06,55] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:6:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 00:15:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 00:15:15,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 00:15:33,78] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/451667175/shard_0010.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0010.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/451667175/shard_0010.bam \
  OUTPUT=shard_0010.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/inputs/451667175/shard_0010.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 00:15:33,79] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-9/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 00:15:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: job id: 610665
[2025-11-15 00:15:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: Status change from - to WaitingForReturnCode
[2025-11-15 00:53:07,50] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:9:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 00:53:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 00:53:15,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 00:53:33,37] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/451667175/shard_0004.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0004.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/451667175/shard_0004.bam \
  OUTPUT=shard_0004.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/inputs/451667175/shard_0004.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 00:53:33,37] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-3/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 00:53:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: job id: 611617
[2025-11-15 00:53:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: Status change from - to WaitingForReturnCode
[2025-11-15 01:24:59,99] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:3:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 01:25:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 01:25:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 01:25:34,69] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/451667175/shard_0032.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0032.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/451667175/shard_0032.bam \
  OUTPUT=shard_0032.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/inputs/451667175/shard_0032.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 01:25:34,70] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-31/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 01:25:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: job id: 612478
[2025-11-15 01:25:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: Status change from - to WaitingForReturnCode
[2025-11-15 02:04:05,72] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:31:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 02:04:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 02:04:15,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 02:04:34,26] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/451667175/shard_0025.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0025.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/451667175/shard_0025.bam \
  OUTPUT=shard_0025.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/inputs/451667175/shard_0025.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 02:04:34,26] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-24/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 02:04:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: job id: 613380
[2025-11-15 02:04:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: Status change from - to WaitingForReturnCode
[2025-11-15 02:36:55,91] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:24:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 02:37:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 02:37:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 02:37:24,86] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/451667175/shard_0013.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0013.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/451667175/shard_0013.bam \
  OUTPUT=shard_0013.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/inputs/451667175/shard_0013.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 02:37:24,86] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-12/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 02:37:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: job id: 614251
[2025-11-15 02:37:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: Status change from - to WaitingForReturnCode
[2025-11-15 03:13:30,49] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:12:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 03:13:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 03:13:35,21] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 03:13:55,54] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/451667175/shard_0030.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0030.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/451667175/shard_0030.bam \
  OUTPUT=shard_0030.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/inputs/451667175/shard_0030.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 03:13:55,55] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-29/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 03:14:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: job id: 615131
[2025-11-15 03:14:00,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: Status change from - to WaitingForReturnCode
[2025-11-15 03:47:58,73] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:29:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 03:48:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 03:48:05,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 03:48:24,63] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/451667175/shard_0008.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0008.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/451667175/shard_0008.bam \
  OUTPUT=shard_0008.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/inputs/451667175/shard_0008.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 03:48:24,63] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-7/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 03:48:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: job id: 616051
[2025-11-15 03:48:25,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: Status change from - to WaitingForReturnCode
[2025-11-15 04:24:31,58] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:7:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 04:24:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 04:24:35,21] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 04:24:54,42] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/451667175/shard_0024.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0024.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/451667175/shard_0024.bam \
  OUTPUT=shard_0024.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/inputs/451667175/shard_0024.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 04:24:54,43] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-23/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 04:24:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: job id: 616944
[2025-11-15 04:24:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: Status change from - to WaitingForReturnCode
[2025-11-15 04:53:53,60] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:23:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 04:53:55,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 04:53:55,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 04:54:12,47] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/451667175/shard_0017.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0017.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/451667175/shard_0017.bam \
  OUTPUT=shard_0017.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/inputs/451667175/shard_0017.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 04:54:12,47] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-16/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 04:54:15,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: job id: 617797
[2025-11-15 04:54:15,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: Status change from - to WaitingForReturnCode
[2025-11-15 05:25:40,78] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:16:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 05:25:45,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 05:25:45,21] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 05:26:02,42] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/451667175/shard_0033.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0033.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/451667175/shard_0033.bam \
  OUTPUT=shard_0033.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/inputs/451667175/shard_0033.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 05:26:02,42] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-32/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 05:26:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: job id: 618677
[2025-11-15 05:26:05,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: Status change from - to WaitingForReturnCode
[2025-11-15 05:59:48,17] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:32:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 05:59:55,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 05:59:55,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 06:00:15,94] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/451667175/shard_0027.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0027.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/451667175/shard_0027.bam \
  OUTPUT=shard_0027.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/inputs/451667175/shard_0027.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 06:00:15,95] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-26/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 06:00:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: job id: 619560
[2025-11-15 06:00:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: Status change from - to WaitingForReturnCode
[2025-11-15 06:31:26,88] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:26:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 06:31:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 06:31:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 06:31:54,67] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/451667175/shard_0012.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0012.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/451667175/shard_0012.bam \
  OUTPUT=shard_0012.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/inputs/451667175/shard_0012.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 06:31:54,67] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-11/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 06:31:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: job id: 620549
[2025-11-15 06:31:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: Status change from - to WaitingForReturnCode
[2025-11-15 07:04:29,92] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:11:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 07:04:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 07:04:35,22] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 07:04:54,19] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/451667175/shard_0006.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0006.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/451667175/shard_0006.bam \
  OUTPUT=shard_0006.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/inputs/451667175/shard_0006.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 07:04:54,19] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-5/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 07:04:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: job id: 621411
[2025-11-15 07:04:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: Status change from - to WaitingForReturnCode
[2025-11-15 07:37:16,60] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:5:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 07:37:25,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 07:37:25,21] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 07:37:47,58] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/451667175/shard_0022.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0022.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/451667175/shard_0022.bam \
  OUTPUT=shard_0022.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/inputs/451667175/shard_0022.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 07:37:47,58] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-21/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 07:37:50,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: job id: 622286
[2025-11-15 07:37:50,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: Status change from - to WaitingForReturnCode
[2025-11-15 08:12:32,74] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:21:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 08:12:35,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 08:12:35,21] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
[2025-11-15 08:12:53,40] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: [38;5;5mset -euxo pipefail

DRAGMAP_VERSION=$(dragen-os --version)

if [ -z ${DRAGMAP_VERSION} ]; then
    exit 1;
fi

mkdir dragen_reference
mv /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/-1290198700/reference.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/-1290198700/hash_table.cfg.bin /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/-1290198700/hash_table.cmp dragen_reference

dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/451667175/shard_0029.bam -r dragen_reference --interleaved=1 --preserve-map-align-order true 2> >(tee shard_0029.dragmap.stderr.log >&2) | samtools view -h -O BAM - > aligned.bam
java -Dsamjdk.compression_level=2 -Xms1000m -Xmx1000m -jar /picard/picard.jar \
  MergeBamAlignment \
  VALIDATION_STRINGENCY=SILENT \
  EXPECTED_ORIENTATIONS=FR \
  ATTRIBUTES_TO_RETAIN=X0 \
  ATTRIBUTES_TO_REMOVE=RG \
  ATTRIBUTES_TO_REMOVE=NM \
  ATTRIBUTES_TO_REMOVE=MD \
  ALIGNED_BAM=aligned.bam \
  UNMAPPED_BAM=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/451667175/shard_0029.bam \
  OUTPUT=shard_0029.bam \
  REFERENCE_SEQUENCE=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/-1569105944/Homo_sapiens_assembly38_masked.fasta \
  PAIRED_RUN=true \
  SORT_ORDER="unsorted" \
  IS_BISULFITE_SEQUENCE=false \
  ALIGNED_READS_ONLY=false \
  CLIP_ADAPTERS=false \
   \
   \
  MAX_RECORDS_IN_RAM=2000000 \
  ADD_MATE_CIGAR=true \
  MAX_INSERTIONS_OR_DELETIONS=-1 \
  PRIMARY_ALIGNMENT_STRATEGY=MostDistant \
  PROGRAM_RECORD_ID="dragen-os" \
  PROGRAM_GROUP_VERSION="${DRAGMAP_VERSION}" \
  PROGRAM_GROUP_COMMAND_LINE="dragen-os -b /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/inputs/451667175/shard_0029.bam -r dragen_reference --interleaved=1" \
  PROGRAM_GROUP_NAME="dragen-os" \
  UNMAPPED_READ_STRATEGY=COPY_TO_TAG \
  ALIGNER_PROPER_PAIR_FLAGS=true \
  UNMAP_CONTAMINANT_READS=true \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 08:12:53,41] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28 \
  us.gcr.io/broad-gotc-prod/dragmap@sha256:5964afca3e4173c33b11100f68c1a44642e0ff2ee4de5a49d8cd446fef308b23 /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-SamToFastqAndDragmapAndMba/shard-28/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 08:12:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: job id: 623201
[2025-11-15 08:12:55,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: Status change from - to WaitingForReturnCode
[2025-11-15 08:43:44,15] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.SamToFastqAndDragmapAndMba:28:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 08:43:49,11] [info] 68503023-4139-40aa-a490-2cae765ab1c1-SubWorkflowActor-SubWorkflow-SplitRG:0:1 [[38;5;2m68503023[0m]: Starting SplitLargeReadGroup.GatherMonolithicBamFile
[2025-11-15 08:43:55,16] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 08:43:55,17] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: Unrecognized runtime attribute keys: preemptible, disks, memory
[2025-11-15 08:58:32,20] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: [38;5;5mjava -Dsamjdk.compression_level=2 -Xms2000m -Xmx2500m -jar /usr/picard/picard.jar \
  GatherBamFiles \
  INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-2063839379/shard_0001.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/434176558/shard_0002.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1362774801/shard_0003.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1135241136/shard_0004.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-661710223/shard_0005.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1836305714/shard_0006.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/39354355/shard_0007.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1757597004/shard_0008.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/740418933/shard_0009.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1056532426/shard_0010.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/795897396/shard_0011.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1001053963/shard_0012.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1496961974/shard_0013.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-299989385/shard_0014.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-2096940744/shard_0015.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/401075193/shard_0016.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1395876166/shard_0017.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1102139771/shard_0018.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-694811588/shard_0019.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1803204349/shard_0020.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/924980115/shard_0021.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-871971244/shard_0022.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1626044693/shard_0023.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-170906666/shard_0024.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1967858025/shard_0025.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/530157912/shard_0026.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-1266793447/shard_0027.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1231222490/shard_0028.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-565728869/shard_0029.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1932287068/shard_0030.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1054062834/shard_0031.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/-742888525/shard_0032.bam INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/inputs/1755127412/shard_0033.bam \
  OUTPUT=ERR3684866_ILMN.aligned.unsorted.bam \
  CREATE_INDEX=false \
  CREATE_MD5_FILE=false[0m
[2025-11-15 08:58:32,20] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile \
  us.gcr.io/broad-gotc-prod/picard-cloud@sha256:e5ad5339080c3107c04e4a4d000b8ab06f472b77019debc3ff75499d28995b0c /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 08:58:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: job id: 624128
[2025-11-15 08:58:35,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: Status change from - to WaitingForReturnCode
[2025-11-15 09:12:49,80] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m68503023[0mSplitLargeReadGroup.GatherMonolithicBamFile:NA:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 09:12:51,34] [info] 68503023-4139-40aa-a490-2cae765ab1c1-SubWorkflowActor-SubWorkflow-SplitRG:0:1 [[38;5;2m68503023[0m]: Workflow SplitLargeReadGroup complete. Final Outputs:
{
  "SplitLargeReadGroup.aligned_bam": "/mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-SplitRG/shard-0/SplitLargeReadGroup/68503023-4139-40aa-a490-2cae765ab1c1/call-GatherMonolithicBamFile/execution/ERR3684866_ILMN.aligned.unsorted.bam"
}
[2025-11-15 09:12:59,15] [info] 6a80d6bc-c51f-4c29-a206-f821379275e2-SubWorkflowActor-SubWorkflow-UnmappedBamToAlignedBam:-1:1 [[38;5;2m6a80d6bc[0m]: Starting UnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics
[2025-11-15 09:13:01,19] [info] 6a80d6bc-c51f-4c29-a206-f821379275e2-SubWorkflowActor-SubWorkflow-UnmappedBamToAlignedBam:-1:1 [[38;5;2m6a80d6bc[0m]: Starting UnmappedBamToAlignedBam.MarkDuplicates
[2025-11-15 09:13:05,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 09:13:05,18] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: Unrecognized runtime attribute keys: preemptible, disks, memory
[2025-11-15 10:16:08,03] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: [38;5;5mjava -Xms5000m -Xmx6500m -jar /usr/picard/picard.jar \
  CollectMultipleMetrics \
  INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/inputs/-1148320263/ERR3684866_ILMN.aligned.unsorted.bam \
  OUTPUT=ERR3684866_ILMN.readgroup \
  ASSUME_SORTED=true \
  PROGRAM=null \
  PROGRAM=CollectBaseDistributionByCycle \
  PROGRAM=CollectInsertSizeMetrics \
  PROGRAM=MeanQualityByCycle \
  PROGRAM=QualityScoreDistribution \
  METRIC_ACCUMULATION_LEVEL=null \
  METRIC_ACCUMULATION_LEVEL=ALL_READS

touch ERR3684866_ILMN.readgroup.insert_size_metrics
touch ERR3684866_ILMN.readgroup.insert_size_histogram.pdf[0m
[2025-11-15 10:16:08,04] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0 \
  us.gcr.io/broad-gotc-prod/picard-cloud@sha256:e5ad5339080c3107c04e4a4d000b8ab06f472b77019debc3ff75499d28995b0c /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-CollectUnsortedReadgroupBamQualityMetrics/shard-0/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 10:16:10,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: job id: 624966
[2025-11-15 10:16:10,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: Status change from - to WaitingForReturnCode
[2025-11-15 12:12:08,78] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.CollectUnsortedReadgroupBamQualityMetrics:0:1]: Status change from WaitingForReturnCode to Done
[2025-11-15 12:12:15,17] [info] Assigned new job execution tokens to the following groups: b99b9be0: 1
[2025-11-15 12:12:15,18] [[38;5;220mwarn[0m] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.MarkDuplicates:NA:1]: Unrecognized runtime attribute keys: preemptible, disks, memory
[2025-11-15 12:12:15,21] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.MarkDuplicates:NA:1]: [38;5;5mjava -Dsamjdk.compression_level=2 -Xms6g -jar /usr/picard/picard.jar \
  MarkDuplicates \
  INPUT=/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/inputs/-1148320263/ERR3684866_ILMN.aligned.unsorted.bam \
  OUTPUT=ERR3684866_ILMN.aligned.unsorted.duplicates_marked.bam \
  METRICS_FILE=ERR3684866_ILMN.duplicate_metrics \
  VALIDATION_STRINGENCY=SILENT \
   \
   \
  OPTICAL_DUPLICATE_PIXEL_DISTANCE=2500 \
  ASSUME_SORT_ORDER="queryname" \
  CLEAR_DT="false" \
  ADD_PG_TAG_TO_READS=false[0m
[2025-11-15 12:12:15,22] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.MarkDuplicates:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/execution/docker_cid \
  -i \
  --user 1027:1028 \
  --cpus="64" \
  --memory="204800M" \
  --entrypoint /bin/bash \
  -v /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates:/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates \
  us.gcr.io/broad-gotc-prod/picard-cloud@sha256:e5ad5339080c3107c04e4a4d000b8ab06f472b77019debc3ff75499d28995b0c /cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/execution/docker_cid[0m)

# remove the container after waiting
docker rm [38;5;5mcat /mnt/nas1/projects/lasr/blendseq/warp-pipelines/warp-gatk-germline-single-sample-pipeline-master/tmp/13594842830666249168/cromwell-executions/WholeGenomeGermlineSingleSample/b99b9be0-aafd-4375-a895-d53cc3695de8/call-UnmappedBamToAlignedBam/UnmappedBamToAlignedBam/6a80d6bc-c51f-4c29-a206-f821379275e2/call-MarkDuplicates/execution/docker_cid[0m

# return exit code
exit $rc
[2025-11-15 12:12:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.MarkDuplicates:NA:1]: job id: 626046
[2025-11-15 12:12:20,08] [info] BackgroundConfigAsyncJobExecutionActor [[38;5;2m6a80d6bc[0mUnmappedBamToAlignedBam.MarkDuplicates:NA:1]: Status change from - to WaitingForReturnCode
[2025-11-17 15:48:43,82] [info] Workflow polling stopped
